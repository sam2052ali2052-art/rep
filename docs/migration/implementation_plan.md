# Raptor Foundation Policy Migration - Implementation Plan
# خطة تنفيذية تفصيلية لهجرة سياسة Raptor الأساسية

**تاريخ الإنشاء:** 2 فبراير 2026  
**المدة الإجمالية:** 10 أسابيع  
**الهدف:** هجرة مشروع Raptor من C++ إلى Python/PyTorch  

---

# نظرة عامة على المراحل

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                         الجدول الزمني العام                                  │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│  الأسبوع 1-2    │  الأسبوع 3-4    │  الأسبوع 5-6    │  الأسبوع 7-8    │ 9-10 │
│  ┌──────────┐   │  ┌──────────┐   │  ┌──────────┐   │  ┌──────────┐   │ ┌──┐ │
│  │ المرحلة 1│   │  │ المرحلة 2│   │  │ المرحلة 3│   │  │ المرحلة 4│   │ │5-6│ │
│  │ الأساس   │──►│  │ البنية   │──►│  │ التدريب  │──►│  │ التقطير  │──►│ │  │ │
│  │          │   │  │ التحتية  │   │  │ المسبق   │   │  │          │   │ └──┘ │
│  └──────────┘   │  └──────────┘   │  └──────────┘   │  └──────────┘   │      │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘
```

---

# فهرس المراحل

| المرحلة | الاسم | المدة | الأسابيع | الملف |
|---------|-------|-------|----------|-------|
| 1 | الأساس وهيكل المشروع | أسبوعان | 1-2 | [phase_1_foundation.md](./phase_1_foundation.md) |
| 2 | البنية التحتية للتعلم المعزز | أسبوعان | 3-4 | [phase_2_rl_infrastructure.md](./phase_2_rl_infrastructure.md) |
| 3 | التدريب المسبق (Pre-Training) | أسبوعان | 5-6 | [phase_3_pretraining.md](./phase_3_pretraining.md) |
| 4 | التدريب اللاحق (Post-Training) | أسبوعان | 7-8 | [phase_4_posttraining.md](./phase_4_posttraining.md) |
| 5 | التصدير والنشر | أسبوع | 9 | [phase_5_export.md](./phase_5_export.md) |
| 6 | الاختبار والتوثيق | أسبوع | 10 | [phase_6_testing.md](./phase_6_testing.md) |
| إضافي | المكونات الإضافية للنشر الواقعي | - | - | [additional_components.md](./additional_components.md) |

---

# وصف موجز لكل مرحلة

## [المرحلة 1: الأساس وهيكل المشروع](./phase_1_foundation.md)
**المدة:** أسبوعان (الأسبوع 1-2)  
**الهدف:** إنشاء هيكل المشروع وتنفيذ الشبكة العصبية الأساسية

**المخرجات الرئيسية:**
- هيكل المشروع (pyproject.toml، المجلدات)
- طبقات الشبكة العصبية (Dense، GRU، RaptorPolicy)
- نظام التكوين (YAML، JSON)
- اختبارات الوحدة

---

## [المرحلة 2: البنية التحتية للتعلم المعزز](./phase_2_rl_infrastructure.md)
**المدة:** أسبوعان (الأسبوع 3-4)  
**الهدف:** تنفيذ البنية التحتية للتدريب

**المخرجات الرئيسية:**
- L2F Gymnasium Wrapper
- Replay Buffer مع sequence sampling
- خوارزمية SAC
- تكامل TensorBoard

---

## [المرحلة 3: التدريب المسبق (Pre-Training)](./phase_3_pretraining.md)
**المدة:** أسبوعان (الأسبوع 5-6)  
**الهدف:** تدريب 1000 معلم (teacher policies)

**المخرجات الرئيسية:**
- نظام توليد معلمات ديناميكية
- PreTrainer class
- 1000 checkpoint للمعلمين
- سكربتات التدريب

---

## [المرحلة 4: التدريب اللاحق (Post-Training)](./phase_4_posttraining.md)
**المدة:** أسبوعان (الأسبوع 7-8)  
**الهدف:** تقطير المعرفة إلى سياسة طالب موحدة

**المخرجات الرئيسية:**
- PostTrainer class
- Knowledge Distillation (Behavioral Cloning + DAgger)
- سياسة طالب موحدة
- تقييم الأداء

---

## [المرحلة 5: التصدير والنشر](./phase_5_export.md)
**المدة:** أسبوع (الأسبوع 9)  
**الهدف:** تصدير النموذج للنشر على Android

**المخرجات الرئيسية:**
- تصدير ONNX
- تحويل إلى TensorFlow Lite
- اختبار التوافق
- دليل التكامل مع Android

---

## [المرحلة 6: الاختبار والتوثيق](./phase_6_testing.md)
**المدة:** أسبوع (الأسبوع 10)  
**الهدف:** اختبار شامل وتوثيق كامل

**المخرجات الرئيسية:**
- اختبارات شاملة
- توثيق API
- README كامل
- أمثلة الاستخدام

---

## [المكونات الإضافية للنشر الواقعي](./additional_components.md)
**الهدف:** ضمان جاهزية السياسة للتنفيذ على طائرة حقيقية

**المحتويات:**
1. تتبع المسار (Trajectory Tracking - Langevin)
2. ضوضاء الملاحظة والفعل (Observation/Action Noise)
3. WebSocket UI للعرض ثلاثي الأبعاد
4. وضع الاستدلال 250 Hz
5. دليل التكامل مع الطائرة الحقيقية
6. فحوصات السلامة (Safety Checks)
7. تكامل Android الكامل
8. اختبار Sim-to-Real

---

# ملخص الخطة التنفيذية

| المرحلة | الأسبوع | المخرجات الرئيسية |
|---------|---------|-------------------|
| 1 | 1-2 | هيكل المشروع، الشبكة العصبية، نظام التكوين |
| 2 | 3-4 | L2F Wrapper، Replay Buffer، SAC |
| 3 | 5-6 | 1000 معلم مدرب |
| 4 | 7-8 | سياسة طالب موحدة |
| 5 | 9 | ONNX، TFLite |
| 6 | 10 | اختبارات، توثيق |
| **إضافي** | - | Trajectory Tracking، WebSocket UI، Safety، Android Integration |

---

# قائمة التحقق النهائية

## قبل البدء:
- [ ] GPU متاح (RTX 3090 موصى)
- [ ] Python 3.10+ مثبت
- [ ] PyTorch مع CUDA مثبت
- [ ] مساحة تخزين كافية (100 GB)

## بعد الانتهاء:
- [ ] جميع الاختبارات تمر
- [ ] النموذج يعمل في المحاكاة
- [ ] التصدير إلى ONNX ناجح
- [ ] التصدير إلى TFLite ناجح
- [ ] التوثيق كامل
- [ ] الكود نظيف ومنظم

## للنشر الواقعي (إضافي):
- [ ] Trajectory Tracking يعمل (50% hover + 50% Langevin)
- [ ] Observation/Action noise مُفعّل
- [ ] WebSocket UI يعمل للعرض ثلاثي الأبعاد
- [ ] اختبار الاستدلال بمعدل 250 Hz ناجح
- [ ] فحوصات السلامة مُفعّلة
- [ ] تحويل الإحداثيات (FLU) صحيح
- [ ] ترتيب المحركات مُتحقق منه
- [ ] تكامل Android كامل
- [ ] اختبار Sim-to-Real ناجح (>90% success rate)

---

# الوثائق المرجعية

- [الوثيقة المرجعية الشاملة](./reference.md) - جميع القرارات والاتفاقيات

---

**نهاية فهرس الخطة التنفيذية**

*تم إنشاء هذه الخطة كدليل تفصيلي لتنفيذ هجرة Raptor Foundation Policy من C++ إلى Python/PyTorch.*
*تم تحديث الخطة لتشمل جميع المكونات الضرورية للنشر على طائرة حقيقية.*
*تم فصل كل مرحلة في ملف منفصل لسهولة المتابعة والتنفيذ.*
